## 什么是区块链

区块链是一种分布式账本技术

区块链按照顺序将每个数据区块连接起来，形成区块链，它通过去中心化和密码学技术，安全地存储数据，保证数据不可篡改和公开透明。

### 基本定义

区块：数据会被分成一个个区块，每个区块中包含交易记录或其他信息。

链： 每个区块通过加密算法与上一个区块相连，形成一条链条结构。

分布式账本：账本的副本存储在网络中的多个节点上，所有节点共同维护数据的一致性。

## 区块链的特征

区块链主要有以下几个核心特点

去中心化

透明性

安全性

不可篡改

首先，暂时放下对加密货币和所有相关事务的想法，从下面的故事中了解区块链。

## 案例

如果你和你的朋友经常兑换货币，他们都有很频繁的金钱往来（比如 AA 支付晚餐等等），总是用现金很不方便，所以你们可能需要一个公共账本，来记录这些发生的交易信息（比如 Alice pays Bob 20, Bob pays Charlie 40）诸如此类，这个账本是公开的，每个人都可以查阅，到了月底大家对交易记录无异议后就会一起合计，如果你支出的钱多余收到的钱，你就把钱放进罐子里，如果你收到的钱多余支出的钱，你就把这笔钱取出来。

![image-20250612064353273](.\images\image-20250612064353273.png)

![image-20250612064402140](.\images\image-20250612064402140.png)

但公共账本存在一个问题，正是因为每个人都能添加记录，应该怎么避免 Bob 在没有 Alice 的核准的情况下偷偷计下 Alice pays Bob 100，我们又怎么相信账本中的记录都准确无误呢 ？

这就是密码学的第一部分，即数字签名，就像手写签名一样，Alice 需要在这笔记录后进行签名，证明他同意了这笔交易记录并批准了它，对于电子签名来说我们每个人都会有公钥和私钥，这个秘钥是你自己需要保留的东西，在现实世界中，无论你签署什么文件，你的手写签名看起来都是一样的，  但数字签名更加强大，它会根据不同的消息而变化，它是由一些 1 或者 0 组成的字符串，通常约为 256 位，以签署的内容以及私人秘钥，私人秘钥确保了只有你本人才能生成签名，于此同时还有一个验证函数，而这个函数还需要公共秘钥，这两种方式保证了如果你不知道私钥的情况下，几乎不可能找到一个正确的签名。

![image-20250612064432880](.\images\image-20250612064432880.png)

![image-20250612064436335](.\images\image-20250612064436335.png)

即便我无法获取或者破解电子签名，那么我直接在账本上对上一笔已签名的记录进行复制，因为这些记录对应的签名都是正确的，要解决这个问题，在签署新的交易信息时，交易信息还必要包含一个唯一的编号与之对应。有了电子签名我们就可以解决以上的信任危机。

![image-20250612064450359](.\images\image-20250612064450359.png)

电子签名虽然解决了信任危机，但是任然需要一个信任机构，不然会出现 Alice 支出的金额无法支付的情况，我们需要解决这种入不敷出的情况。

解决方案：一开始，ABCD 四个人每人就往账上支付 100，账本上最会先记录这几条信息A获得 100 ...等等，现在，我们只需要拒绝账本上记录某些人入不敷出的交易

![image-20250612064505143](.\images\image-20250612064505143.png)

这个设计真正去掉了账本和真实货币的连接，理论上如果世界所有人都用这个账本，可以一致在这个账本上收付款而不需要真正的货币。实际上，我们把账本上的货币单位称之为账元，简称 LD，你可以将 LD 自由的兑换成真正的其他货币，但是这样的兑换并不在这套系统设计的初衷里。以上就是理解加密货币的基本概念。当然公共账本跟现在的加密货币还是有许多不同点。

对于公共账本来说，需要存放到一个信任的机构，但是如果所有人都能够获取这份账本也就不需要中间机构了，当出现交易时，Alice pays Bob 100，Alice 就会将这个信息传播给网络中所有人，其他人收到后都在自己账本上记录这条信息，这样就能使得网络中每个人手上的账本是一样的。

但这样的设计存在问题，如何知道哪个人手上的账本是正确的呢？又如何保证其他人在这个规则下，都能以同样的顺序记录交易最终形成一份同样的账本？

下面是两张加密货币的解决方案：

- 比特币：选择信任消耗最多计算资源的那份账本。

- 以太坊：质押更多货币的人被选中验证交易参与投票的机会越高，最后通过投票数来决定信任哪份账本。


![image-20250612064541087](.\images\image-20250612064541087.png)

假定我们使用 SHA256 哈希函数，SHA256(“green”)，内容可以是任何信息或者文件，它们会输出一个固定的 bit 字符串比如 256 位，这些输出的值被设计为随机的随机数。比如A找到了一个数字 689321334 ，使得账本进行 SHA256 后刚好前面 30 为 0，这种就被称为工作证明。

![image-20250612064605274](.\images\image-20250612064605274.png)

而比特币的核心点就是每个人都会信任计算能力最多的那份账单，为了实现这个，我们需要把账单分成区块，为了保证顺序，每个区块都会拥有上一个区块的加密后的值，如果某个区块信息被篡改，那么该区块之后包括该区块都需要重新计算工作证明，而这些连起来的区块就是区块链。

![image-20250612064615170](.\images\image-20250612064615170.png)

如果当 Alice 修改了某个区块的值进行修改，但它并没有把这个区块广播给网络中的其他人而只是传播给了 Bob，首先，A需要比其他人更先找到一个数字使得区块以特定 0 开头，同时 Bob 也有可能受到其他人的区块传播，此时 Alice 为了让 Bob 相信它那份伪造给 Bob 的区块，需要重新计算伪造区块后面所有的区块，这些区块和来自其他人的都不一致，但系统规定 Bob 总是会信任和选择最长的那一条区块链，所以 Alice 需要比其他人更快计算出区块，这样的情况下，Alice 必须至少拥有所有人（总共有 ABCD 四个）计算资源的 50%，否则其他人所计算的区块链会更长。以上就是区块链中去中心化，安全性，不可篡改和透明性的简单体现和理解。

![image-20250612064628198](.\images\image-20250612064628198.png)

